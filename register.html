<!DOCTYPE html>
<html>
<head>
  <title>Publicar alojamiento | TuAloja</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=TU_API_KEY"></script>
  <style>
    body { font-family: Arial; max-width: 700px; margin: auto; }
    input, textarea, select { width: 100%; padding: 10px; margin: 8px 0; }
    button { background:#0a58ca; color:white; padding:12px; border:none; cursor:pointer; }
    #map { height: 300px; margin-top: 10px; }
  </style>
</head>

<body>

<h2>Publicar alojamiento</h2>

<form id="propertyForm">

<label>Tipo de propiedad</label>
<select name="propertyType">
  <option>Departamento</option>
  <option>Casa</option>
</select>

<label>Nombre del alojamiento</label>
<input name="title" required>

<label>Dirección</label>
<input name="address" required>

<label>Ciudad</label>
<input name="city" required>

<div id="map"></div>

<input type="hidden" name="lat">
<input type="hidden" name="lng">

<label>Huéspedes máximos</label>
<input type="number" name="maxGuests" required>

<label>Habitaciones</label>
<input type="number" name="bedrooms" required>

<label>Baños</label>
<input type="number" name="bathrooms" required>

<label>Precio por noche</label>
<input type="number" name="price" required>

<label>Descripción</label>
<textarea name="description"></textarea>

<label>Fotos</label>
<input type="file" multiple>

<h3>Verificación del anfitrión</h3>

<label>Nombre del propietario</label>
<input name="ownerName" required>

<label>WhatsApp</label>
<input name="ownerPhone" required>

<button type="submit">Publicar propiedad</button>

</form>

<script>
let map;
let marker;

function initMap() {
  const defaultLocation = { lat: -31.865, lng: -59.026 }; // Villaguay
  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 13,
    center: defaultLocation
  });

  marker = new google.maps.Marker({
    position: defaultLocation,
    map: map,
    draggable: true
  });

  marker.addListener("dragend", function() {
    document.querySelector("[name=lat]").value = marker.getPosition().lat();
    document.querySelector("[name=lng]").value = marker.getPosition().lng();
  });
}

window.onload = initMap;

document.getElementById("propertyForm").addEventListener("submit", function(e){
  e.preventDefault();
  const data = Object.fromEntries(new FormData(this));
  localStorage.setItem("propiedad", JSON.stringify(data));
  alert("Propiedad enviada para revisión");
});
</script>

</body>
</html>

<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resultados - Aloja</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Solo para que se vea prolijo aunque tu CSS no tenga estilos para esto */
    .contenedor { max-width: 980px; margin: 0 auto; padding: 20px; }
    .box {
      background: white;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,.08);
      margin-bottom: 16px;
    }
    .titulo { margin: 0 0 6px; }
    .muted { color: #5b6472; margin: 0; }
    .chips { display:flex; flex-wrap:wrap; gap:10px; margin-top: 10px; }
    .chip { background:#eef4ff; color:#1b167f; padding:8px 12px; border-radius:999px; font-weight:700; }
    .grid { display:grid; gap:12px; }
    @media(min-width:900px){ .grid { grid-template-columns: 1fr 1fr; } }
    .card {
      background:#fff;
      border:1px solid #eef0f6;
      border-radius:16px;
      padding:14px;
    }
    .btn {
      display:inline-block;
      padding:10px 14px;
      border-radius:12px;
      text-decoration:none;
      font-weight:800;
      background:#1b167f;
      color:#fff;
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <header>
    <a href="index.html" class="logo"><span class="icono-maleta">üß≥</span> Aloja.com.ar</a>
    <nav>
      <span id="navAuth"></span>
      <a href="alojamiento.html">Registra tu alojamiento</a>
      <a href="ayuda.html">Ayuda</a>
    </nav>
  </header>

  <main class="contenedor">
    <!-- Resumen de b√∫squeda -->
    <section class="box">
      <h1 class="titulo">Resultados</h1>
      <p class="muted" id="resumenTexto">Cargando tu b√∫squeda...</p>

      <div class="chips" id="chips"></div>

      <a class="btn" href="index.html">Cambiar b√∫squeda</a>
    </section>

    <!-- Zona donde luego van los alojamientos -->
    <section class="box">
      <h2 class="titulo" style="font-size:18px;">Alojamientos (demo)</h2>
      <p class="muted">Todav√≠a no est√°s filtrando una base real. Esto es solo para ver que el buscador funciona.</p>

      <div class="grid" id="listaAlojamientos"></div>
    </section>
  </main>

  <script>
    // 1) Leer lo que guard√≥ el index
    const destino = localStorage.getItem("destino") || "";
    const entrada = localStorage.getItem("entrada") || "";
    const salida = localStorage.getItem("salida") || "";
    const adultos = localStorage.getItem("adultos") || "1";
    const ninos = parseInt(localStorage.getItem("ninos")) || 0;

    let edades = [];
    try {
      edades = JSON.parse(localStorage.getItem("edades_ninos") || "[]");
    } catch (e) {
      edades = [];
    }

    // 2) Mostrar resumen arriba
    const resumen = document.getElementById("resumenTexto");
    const chips = document.getElementById("chips");

    // Si entraron a resultados sin buscar, los mandamos al inicio
    if (!destino || !entrada || !salida) {
      resumen.textContent = "No hay una b√∫squeda cargada. Volv√© al inicio y busc√° un destino.";
      chips.innerHTML = "";
    } else {
      const textoNinos = (ninos > 0) ? `${ninos} ni√±o${ninos > 1 ? "s" : ""}` : "Sin ni√±os";
      resumen.textContent = `Buscaste en: ${destino} ¬∑ ${entrada} ‚Üí ${salida}`;

      // Chips (etiquetas)
      const chipsData = [
        `${adultos} adulto${Number(adultos) > 1 ? "s" : ""}`,
        textoNinos
      ];

      // Si hay edades, las mostramos
      if (ninos > 0 && edades.length) {
        const edadesLimpias = edades.filter(x => String(x).trim() !== "");
        if (edadesLimpias.length) {
          const etiqueta = (ninos === 1) ? "Edad del ni√±o" : "Edades de los ni√±os";

        // Si hay 1 sola edad y es 1 => "a√±o", si es 2 o m√°s => "a√±os"
let sufijo = " a√±os";
if (edadesLimpias.length === 1) {
  const edadNum = parseInt(edadesLimpias[0], 10);
  sufijo = (edadNum === 1) ? " a√±o" : " a√±os";
}

chipsData.push(`${etiqueta}: ${edadesLimpias.join(", ")}${sufijo}`);
        }
      }

      chips.innerHTML = chipsData.map(t => `<span class="chip">${t}</span>`).join("");
    }

    // 3) Demo de alojamientos + ejemplo de filtro por ni√±os
    // (Esto es solo para que veas la l√≥gica: si vienen ni√±os, no muestro "Solo adultos")
    const alojamientosDemo = [
      { nombre: "Caba√±a Familiar", ciudad: "Cerca del centro", precio: 45000, aceptaNinos: true },
      { nombre: "Depto Solo Adultos", ciudad: "Zona tranquila", precio: 38000, aceptaNinos: false },
      { nombre: "Casa con Patio", ciudad: "Barrio residencial", precio: 52000, aceptaNinos: true }
    ];
    <div id="resumen-busqueda" class="resumen-busqueda"></div>
    const lista = document.getElementById("listaAlojamientos");

    const filtrados = alojamientosDemo.filter(a => {
      if (ninos > 0 && a.aceptaNinos === false) return false;
      return true;
    });

    lista.innerHTML = filtrados.map(a => `
      <div class="card">
        <h3 style="margin:0 0 6px;">${a.nombre}</h3>
        <p class="muted" style="margin:0 0 8px;">${a.ciudad}</p>
        <p style="margin:0 0 8px;"><b>$${a.precio}</b> por noche</p>
        <p class="muted" style="margin:0;">
          ${a.aceptaNinos ? "‚úÖ Apto para ni√±os" : "‚ùå Solo adultos"}
        </p>
      </div>
    `).join("");
  </script>
</body>
</html>
